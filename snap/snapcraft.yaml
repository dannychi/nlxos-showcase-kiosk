name: nlxos-showcase-kiosk # you probably want to 'snapcraft register <name>'
version: '1.0.5' # just for humans, typically '1.2+git' or '1.3.2'
summary: NALINV Showcase Snap # 79 char long summary
description: |
  NALINV's Showcase App, No.NSC001 

grade: stable # must be 'stable' to release into candidate/stable channels
confinement: strict # use 'strict' once you have the right plugs and slots
#base: core18
architectures:
        - build-on: amd64
          run-on: [amd64, armhf]

apps:
  nlxos-showcase-kiosk:
    command: desktop-launch $SNAP/app/nlxos-showcase-kiosk
    plugs:
      - browser-sandbox
      - network
      - network-bind
      - opengl
      - pulseaudio
      - wayland
      - x11

plugs:
  browser-sandbox:
    interface: browser-support
    allow-sandbox: true

parts:
  electron-app:
    source: app/
    plugin: nodejs
    node-engine: 10.14.0

    after:
      - desktop-gtk2

    build: node_modules/.bin/electron-builder
    install: |
      mkdir $SNAPCRAFT_PART_INSTALL/app
      mv dist/linux-unpacked/* $SNAPCRAFT_PART_INSTALL/app
    prime:
      - -node_modules

    stage-packages:
      - libasound2
      - libgconf-2-4
      - libnss3
      - libxss1
      - libxtst6
